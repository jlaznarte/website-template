function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var OUHelpCentre={Config:{URL_LIST_TOPICS:window.ouGlobals.baseUrl+"/topic.json",URL_SAVED:window.ouGlobals.baseUrl+"/saved"},Pages:{},MetaData:{userType:null,isAliasing:!1},ajax:function(e){return $.ajax($.extend({headers:{"Content-type":"application/json"}},e))},init:function(){OUHelpCentre.common(),OUHelpCentre.pageInit()},common:function(){OUCommon.load(),OUHelpCentre.setClassesForColLayout($("#ou-site")),OUHelpCentre.setExternalLinksClass($("#ou-page")),OUHelpCentre.setAliasLinks(),$(".oucarousel").oucarousel(),$("div.on-this-page > ul > li > a, p.to-top > a").attr("data-oulink","anchor"),$(".ouaudio").ouaudio(),$(".ouvideo").ouvideo({googleAnalytics:"UA-4391747-18"}),OUHelpCentre.setupMobileNav(),$(".ou-tooltip").ouTooltip(),$("body.article-multi #ou-content div.ou-paged, body.page-multi #ou-content div.ou-paged").find("a.ou-previous, a.ou-next").ouTooltip(),$("a.ou-skip").attr("href","#ioemenu").attr("data-oulink","anchor").click(function(){$("ul.ou-sections li.ou-expanded a").focus()}),$(function(){$("div.ou-carousel-container > ul.slider > li p").fitText(1.2,{minFontSize:"16px",maxFontSize:"30px"})})},pageInit:function(){ouGlobals.pageName&&OUHelpCentre.Pages[ouGlobals.pageName]&&_typeof(OUHelpCentre.Pages[ouGlobals.pageName].init)&&OUHelpCentre.Pages[ouGlobals.pageName].init()},setClassesForColLayout:function(e){e.find(".item").removeClass("col-item-first col-item-last"),e.find(".cols-2 > .item:nth-child(2n),.cols-3 > .item:nth-child(3n),.cols-4 > .item:nth-child(4n)").addClass("col-item-last"),e.find(".cols-2 > .item:nth-child(2n+1),.cols-3 > .item:nth-child(3n+1),.cols-4 > .item:nth-child(4n+1)").addClass("col-item-first"),$("body.template-gallery div.ou-gallery-nav li:nth-child(3n+1)").addClass("col-item-first")},setExternalLinksClass:function(e){var t=new RegExp("^"+window.ouGlobals.baseUrl+"(?:[/#].*|$)","i"),i=new RegExp("^mailto:.*"),n=new RegExp("^tel:.*");e.find("a").each(function(){var e=$(this),a=e[0].href;if(""==a||"#"==e.attr("href")||i.test(a)||n.test(a)||e.is(".download-link")||e.is(".sh-link-external"))return!0;t.test(a)||e.addClass("sh-link-external")})},setAliasLinks:function(){if(OUHelpCentre.MetaData.isAliasing||"dev"==ouGlobals.env){var e="dev"==ouGlobals.env?"http://msds-acct.open.ac.uk/students":"http://csintra1.open.ac.uk/students";$("a").each(function(){var t=$(this),i=t.attr("href");if(void 0!==i){var n=i.replace(/https?:\/\/msds.open.ac.uk\/students/i,e);t.attr("href",n)}})}},setupMobileNav:function(){$("#ou-region2 div.ou-full-nav").parent().clone().prependTo("#ou-region1"),$("#ou-region1 div.ou-full-nav ul:first-child > li:first-child > strong, div.ou-full-nav ul:first-child > li:first-child > a").on("tap",function(e){$(this).closest("div.ou-full-nav").toggleClass("expanded")}),$("#ou-region1 div.ou-full-nav ul:first-child > li:first-child > a").click(function(e){e.preventDefault()})},isMobile:function(){return"matchMedia"in window&&window.matchMedia("only screen and (max-width:640px)").matches}};OUHelpCentre.Pages.home={init:function(){$(function(){$('body.page-homepage #ou-content div.search input[type="text"]').focus()}),$("div.your-help-centre div.tab-bar > h2").on("tap",OUHelpCentre.Pages.home.Events.yourHelpCentreMenuToggle)},Events:{yourHelpCentreMenuToggle:function(e){e.preventDefault();var t=$("#ou-content div.your-help-centre div.tab-bar > ul.left-nav"),i=t.offset().top-60;$("html, body").animate({scrollTop:i+"px"},1e3),t.toggleClass("visible")}}},function(e){var t,i;!function(e,t){function i(e){this.element=e="object"===_typeof(e)?e:t.getElementById(e),this.moved=!1,this.startY=this.startX=0,this.hasTouchEventOccured=!1,e.addEventListener("touchstart",this,!1),e.addEventListener("touchmove",this,!1),e.addEventListener("touchend",this,!1),e.addEventListener("touchcancel",this,!1),e.addEventListener("mousedown",this,!1),e.addEventListener("mouseup",this,!1)}i.prototype.start=function(e){"touchstart"===e.type&&(this.hasTouchEventOccured=!0),this.moved=!1,this.startX="touchstart"===e.type?e.touches[0].clientX:e.clientX,this.startY="touchstart"===e.type?e.touches[0].clientY:e.clientY},i.prototype.move=function(e){(10<Math.abs(e.touches[0].clientX-this.startX)||10<Math.abs(e.touches[0].clientY-this.startY))&&(this.moved=!0)},i.prototype.end=function(e){var i;this.hasTouchEventOccured&&"mouseup"===e.type?(e.preventDefault(),e.stopPropagation(),this.hasTouchEventOccured=!1):this.moved||(void 0!==t.CustomEvent?i=new t.CustomEvent("tap",{bubbles:!0,cancelable:!0}):(i=t.createEvent("Event")).initEvent("tap",!0,!0),e.target.dispatchEvent(i))},i.prototype.cancel=function(e){this.moved=this.hasTouchEventOccured=!1,this.startY=this.startX=0},i.prototype.destroy=function(){var e=this.element;e.removeEventListener("touchstart",this,!1),e.removeEventListener("touchmove",this,!1),e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mousedown",this,!1),e.removeEventListener("mouseup",this,!1),this.element=null},i.prototype.handleEvent=function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":this.end(e);break;case"touchcancel":this.cancel(e);break;case"mousedown":this.start(e);break;case"mouseup":this.end(e)}},e.Tap=i}(window,document),(t=window.jQuery).event.special.tap=function(){if(!document.addEventListener)return{bindType:"click",delegateType:"click"};var e=window.Tap;return{setup:function(){t.data(this,"tap.js",new e(this))},teardown:function(){var e=t.data(this,"tap.js");e&&e.destroy&&(e.destroy(),t.removeData(this,"tap.js"))},add:function(e){this.addEventListener("tap",e.handler,!1)},remove:function(e){this.removeEventListener("tap",e.handler,!1)}}}(),(i=jQuery).fn.fitText=function(e,t){var n=e||1,a=i.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},t);return this.each(function(){var e=i(this),t=function(){e.css("font-size",Math.max(Math.min(e.width()/(10*n),parseFloat(a.maxFontSize)),parseFloat(a.minFontSize)))};t(),i(window).on("resize.fittext orientationchange.fittext",t)})}}(jQuery),$(document).ready(function(){OUHelpCentre.init()}),OUHelpCentre.Analytics={properties:[{id:"UA-4391747-17",name:"students"},{id:"UA-4391747-18",name:"helpcentre"}],event:function(){Array.prototype.unshift.call(arguments,"event");var e=arguments;ga(function(){$.each(ga.getAll(),function(){this.send.apply(this,e)})})},init:function(){var e,t,i,n,a,o;e=window,t=document,i="script",n="ga",e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(i),o=t.getElementsByTagName(i)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),$.each(OUHelpCentre.Analytics.properties,function(){ga("create",this.id,"auto",{name:this.name})}),ga("helpcentre.set",{dimension1:ouGlobals.env,dimension2:OUHelpCentre.MetaData.userType,dimension3:OUHelpCentre.MetaData.isAliasing}),ga(function(){$.each(ga.getAll(),function(){this.send("pageview")})})}},$(OUHelpCentre.Analytics.init),OUHelpCentre.Analytics.TrackedEvents={trackedEventMappings:{"assignments-exams-contacts-link":{label:"submission-concerns-contacts-link"},"books-materials-contacts-link":{label:"buying-books-contacts-link"},"computing-helpdesk-contacts-link":{label:"materials-access-contacts-link"},"complaints-appeals-contacts-link":{label:"complaint-appeal-contacts-link"},myContactsLink:{category:"button",action:"click",label:"my-contacts-link"},myContactsLinkHomePage:{category:"button",action:"click",label:"my-contacts-link-homepage"},myContactsLinkWidget:{category:"button",action:"click",label:"my-contacts-link-widget"},myContactsLinkCallout:{category:"button",action:"click",label:"my-contacts-link-callout"},myContactsLinkFooter:{category:"button",action:"click",label:"my-contacts-link-footer"},dsaPromoLink:{category:"button",action:"click",label:"dsa-promo-link"},dsaEligible:{category:"form",action:"eligible",label:"dsa-eligible"},dsaNotEligibleStep1:{category:"form",action:"noteligible",label:"dsa-not-eligible-step1"},dsaNotEligibleStep2:{category:"form",action:"noteligible",label:"dsa-not-eligible-step2"},dsaNotEligibleStep3:{category:"form",action:"noteligible",label:"dsa-not-eligible-step3"},dsaNotEligibleStep4:{category:"form",action:"noteligible",label:"dsa-not-eligible-step4"},dsaNotEligibleStep5:{category:"form",action:"noteligible",label:"dsa-not-eligible-step5"},dsaNotEligibleStep6:{category:"form",action:"noteligible",label:"dsa-not-eligible-step6"},dsaNotEligibleStep7:{category:"form",action:"noteligible",label:"dsa-not-eligible-step7"},dsaNotEligibleStep8:{category:"form",action:"noteligible",label:"dsa-not-eligible-step8"},dsaNotEligibleStep9:{category:"form",action:"noteligible",label:"dsa-not-eligible-step9"},gettingreadyBanner:{category:"banner",action:"click",label:"getting-ready-banner"},studentBursaries:{category:"link",action:"click",label:"student-bursaries"},snowdonTrust:{category:"link",action:"click",label:"snowdon-trust"},optionsContactUs:{category:"link",action:"click",label:"options-contact-us"},optionsQualChoicesTool:{category:"link",action:"click",label:"options-qual-choices-tool"},yourModuleChoice:{category:"link",action:"click",label:"your-module-choice-feb-start"},bookACallBack:{category:"link",action:"click",label:"book-a-call-back"},howManyModules:{category:"link",action:"click",label:"how-many-modules"},choosingPartTime:{category:"link",action:"click",label:"choosing-part-time"},choosingFullTime:{category:"link",action:"click",label:"choosing-full-time"},howToPay:{category:"link",action:"click",label:"how-to-pay"},supportFundingDisability:{category:"link",action:"click",label:"support-funding-disability"},studyChoiceCareer:{category:"link",action:"click",label:"study-choice-career"},prospectsLink:{category:"button",action:"click",label:"prospects-link"},adultDirectionsNewUserLink:{category:"button",action:"click",label:"adult-directions-newuser"},adultDirectionsReturningUserLink:{category:"button",action:"click",label:"adult-directions-returninguser"}},init:function(){var e=OUHelpCentre.Analytics.TrackedEvents;e.bindHtmlTrackEvents(e.trackedEventMappings),e.bindOnThisPage(),e.bindFeedbackWidget()},bindHtmlTrackEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(document).on("click","body a[data-track-event]",function(t){t.preventDefault(),setTimeout(function(){a()},1e3);var i=$(this),n=!1,a=function(){n||(n=!0,window.location=i.attr("href"))},o="link",l="click",s=(i=$(this)).attr("data-track-event");"downloadLink"==i.attr("data-track-event")&&(o="Download Link",l=i.attr("href"),s=i.text()),OUHelpCentre.Analytics.TrackedEvents.handleTrackedEvent(o,l,s,e,a)}),$(document).on("click","body button[data-track-event]",function(t){OUHelpCentre.Analytics.TrackedEvents.handleTrackedEvent("button","click",$(this).attr("data-track-event"),e)})},handleTrackedEvent:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,o={category:e,action:t,label:i};n.hasOwnProperty(o.label)&&$.extend(o,n[o.label]),OUHelpCentre.Analytics.event(o.category,o.action,o.label,{hitCallback:a})},bindOnThisPage:function(){$(document).on("click","div.on-this-page a",function(){OUHelpCentre.Analytics.event("On this page","Section selected",$(this).prop("hash"))})},bindFeedbackWidget:function(){$(document).on("sentimentDone",function(e,t){var i="y"==t.sentiment?"positive":"negative";OUHelpCentre.Analytics.event("Feedback","click",i)})}},$(OUHelpCentre.Analytics.TrackedEvents.init),OUHelpCentre.Topic=function(e){this.shortname=e.shortname,this.title=e.title,this.url=e.url,this.description=e.description,this.published=e.published,this.categories=[]},OUHelpCentre.Topic.getTopics=function(){return new Promise(function(e,t){OUHelpCentre.ajax({url:OUHelpCentre.Config.URL_LIST_TOPICS}).done(function(t){var i=[];$.each(t.topics,function(){i.push(new OUHelpCentre.Topic(this))}),e(i)}).fail(function(t){e([])})})},OUHelpCentre.Topic.prototype.getCategories=function(){var e=this;return new Promise(function(t,i){OUHelpCentre.ajax({url:e.url+".json"}).then(function(i){return $.each(i.categories,function(){$.extend(this,{topic:e}),e.categories.push(new OUHelpCentre.Category(this))}),t(e.categories)})})},OUHelpCentre.Category=function(e){this.shortname=e.shortname,this.title=e.title,this.url=e.url,this.description=e.description,this.published=e.published,this.articles=[]},OUHelpCentre.Category.prototype.getArticles=function(){var e=this;return new Promise(function(t,i){OUHelpCentre.ajax({url:e.url+".json"}).done(function(i){e.articles=[],$.each(i.articles,function(){e.articles.push(new OUHelpCentre.Article(this))}),t(e.articles)}).fail(function(i){t(e.articles)})})},OUHelpCentre.Article=function(e){this.title=e.title,this.url=e.url,this.description=e.description,this.published=e.published},OUHelpCentre.ArticleFinder={_cacheTopics:[],Events:{topicClick:function(e){e.preventDefault();var t=$(this),i=t.attr("data-topic-shortname"),n=OUHelpCentre.ArticleFinder._cacheTopics[i];t.parent().addClass("active").siblings().removeClass("active"),$("#ou-page div.article-finder div.steps div.category").addClass("selected active").attr("aria-live","polite").siblings().removeClass("selected active"),OUHelpCentre.Analytics.event("Find an answer","Topic selected",i),OUHelpCentre.ArticleFinder.populateCategories(n)},categoryClick:function(e){e.preventDefault();var t=$(this),i=t.attr("data-topic-shortname"),n=t.attr("data-category-shortname"),a=OUHelpCentre.ArticleFinder._cacheTopics[i].categories.find(function(e){return e.shortname===n});t.parent().addClass("active").siblings().removeClass("active"),$("#ou-page div.article-finder div.steps div.article, #ou-page div.article-finder div.steps div.category").addClass("selected"),$("#ou-page div.article-finder div.steps div.article").addClass("active").attr("aria-live","polite").siblings().removeClass("active"),OUHelpCentre.Analytics.event("Find an answer","Category selected",i+"."+n),OUHelpCentre.ArticleFinder.populateArticles(a)},articleClick:function(e){e.preventDefault();var t=this,i=$(".article-finder .steps .category.selected .docked.active a"),n=i.attr("data-topic-shortname"),a=i.attr("data-category-shortname");OUHelpCentre.Analytics.event("Find an answer","Article selected",n+"."+a+":"+this.pathname.replace(/^\//,""),{hitCallback:function(){window.location.href=t.href}})},itemKeyDown:function(e){var t=$(this);switch(e.keyCode){case 38:e.preventDefault(),t.parent().prev().children("a").click().focus();break;case 40:e.preventDefault(),t.parent().next().children("a").click().focus();break;case 37:e.preventDefault(),t.closest("div",$("#ou-page div.article-finder div.steps")).prev().find("> ul > li.active > a").click().focus();break;case 39:e.preventDefault(),t.closest("div",$("#ou-page div.article-finder div.steps")).next().find("> ul > li:first-child > a").click().focus()}}},init:function(){$("div.article-finder div.steps div > ul").on("keydown","li > a",OUHelpCentre.ArticleFinder.Events.itemKeyDown),OUHelpCentre.ArticleFinder.populateTopics()},populateTopics:function(){var e=$("#ou-page div.article-finder div.steps div.topic > ul");OUHelpCentre.Topic.getTopics().then(function(t){$.each(t,function(){var t=$("<li />");$("<a />").attr("href",this.url).addClass(this.published?"published":"not-published").attr("data-topic-shortname",this.shortname).text(this.title).click(OUHelpCentre.ArticleFinder.Events.topicClick).appendTo(t);t.appendTo(e).addClass("docked"),OUHelpCentre.ArticleFinder._cacheTopics[this.shortname]=this})})},populateCategories:function(e){if(e.categories.length>0)OUHelpCentre.ArticleFinder.injectCategories(e,e.categories);else{var t=$("#ou-page div.article-finder div.steps div.category");t.addClass("loading"),$("body").addClass("ajax-busy"),e.getCategories().then(function(i){OUHelpCentre.ArticleFinder.injectCategories(e,i),$("body").removeClass("ajax-busy"),t.removeClass("loading")})}},injectCategories:function(e,t){var i=$("#ou-page div.article-finder div.steps div.category > ul");i.empty(),$("#ou-page div.article-finder div.steps div.article > ul").empty();var n=0;$.each(t,function(){var t=$("<li />");$("<a />").attr("href",this.url).addClass(this.published?"published":"not-published").attr("data-topic-shortname",e.shortname).attr("data-category-shortname",this.shortname).text(this.title).click(OUHelpCentre.ArticleFinder.Events.categoryClick).appendTo(t);t.appendTo(i),setTimeout(function(){t.addClass("docked")},23*n),n++})},populateArticles:function(e){var t=$("#ou-page div.article-finder div.steps div.article"),i=t.children("ul");i.empty(),t.addClass("loading"),$("body").addClass("ajax-busy"),e.getArticles().then(function(e){var n=0;$.each(e,function(){var e=$("<li />");$("<a />").attr("href",this.url).attr("title",this.description).addClass(this.published?"published":"not-published").text(this.title).click(OUHelpCentre.ArticleFinder.Events.articleClick).appendTo(e);e.appendTo(i),setTimeout(function(){e.addClass("docked")},23*n),n++}),OUHelpCentre.setExternalLinksClass(i),$("body").removeClass("ajax-busy"),t.removeClass("loading")})}},$(OUHelpCentre.ArticleFinder.init),OUHelpCentre.Recommended={URL_RECOMMENDED:window.ouGlobals.baseUrl+"/recommended",init:function(){var e=$("div.recommended-widget");e.find("button.alias-switch, button.cancel").click(function(t){e.toggleClass("switch")}),e.find("button.alias-switch").click(function(e){$(this).parents("div.recommended-widget").find('form.alias-switch input[name="pi"]').focus()}),e.find("div.options button.recommend").click(function(e){e.preventDefault(),$container=$(this).parents("div.recommended-widget");var t=$container.find("span.user-id").text();confirm("You are about to recommend the current page to student "+t+'. A link to this will appear on their "Recommended for you" page.')&&($form=$(this).parents("form"),OUHelpCentre.ajax({type:"POST",url:$form.attr("action"),headers:{"content-type":"application/x-www-form-urlencoded"},data:$form.serialize()}).done(function(e){$container.addClass("is-recommended"),OUHelpCentre.Analytics.event("Recommend to student","Recommended by staff")}).fail(function(e){}))})}},$(OUHelpCentre.Recommended.init),OUHelpCentre.Saved={init:function(){var e=$("div.saved-widget");$("div.saved-widget div.btn-save.save form").submit(function(t){t.preventDefault(),OUHelpCentre.ajax({type:"POST",url:$(this).attr("action"),headers:{"content-type":"application/x-www-form-urlencoded"},data:$(this).serialize()}).done(function(t){e.addClass("saved"),e.find("div.btn-save.unsave form").attr("action",OUHelpCentre.Config.URL_SAVED+"/"+t.id),OUHelpCentre.Analytics.event("Saved by you","Page saved")}).fail(function(e){alert("Only the student can save a page against their record.")})}),$("div.saved-widget div.btn-save.unsave form").submit(function(t){t.preventDefault(),OUHelpCentre.ajax({type:"DELETE",url:$(this).attr("action"),headers:{"content-type":"application/x-www-form-urlencoded"},data:$(this).serialize()}).done(function(t){e.removeClass("saved"),OUHelpCentre.Analytics.event("Saved by you","Page unsaved")}).fail(function(e){alert("Only the student can remove their saved pages.")})})}},$(OUHelpCentre.Saved.init),OUHelpCentre.Search={init:function(){var e=algoliasearch(searchConfig.appId,searchConfig.appKey).initIndex(searchConfig.indexName);$('div.search input[type="text"]').autocomplete({hint:!1,openOnFocus:!0},[{source:$.fn.autocomplete.sources.hits(e,{hitsPerPage:5,facetFilters:searchConfig.facetFilters}),displayKey:"title",templates:{suggestion:function(e){return'<div class="aa-suggestion-type-'+e.type+'"><span>'+e.title+"</span></div>"}}}]).on("autocomplete:selected",function(e,t,i){var n=document.createElement("a");n.href=t.url,OUHelpCentre.Analytics.event("Search: Auto Suggest","Result selected",n.pathname.replace(/^\//,""),{hitCallback:function(){window.location.href=t.url}})})}},$(OUHelpCentre.Search.init);
