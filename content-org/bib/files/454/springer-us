var sociomantic=sociomantic||{enable:function(){sociomantic.sonar.enable()}};sociomantic.sonar=sociomantic.sonar||{enable_callbacks:[],request:{pool:{},add:function(url,load,callback){var sr=sociomantic.sonar.request;var request=sr.item;var random_num=Math.random()+'';var request_id='r'+random_num.replace('.','');url+='&rid='+request_id;sr.pool[request_id]=new request(url,load,callback);return sr.pool[request_id]},item:function(url,load,callback){var self=this;this.url=url;this.load_method=load;this.callback=callback;this.doc=document;this.https=true;this.instance=false;this.response=false;this.status=0;this.timeout=false;this.fallback=false;this.setTimeout=function(length,count){self.timeout={count:count,length:length,object:false}};this.load=function(){if(typeof self.load_method==='function'){self.load_method(self.url,self.doc,self.https);self.status=self.status<1?1:self.status}if(self.timeout){self.timeout.object=setTimeout(function(){if(!self.response){if(self.timeout.count>0){self.timeout.count--;self.status=2;self.load()}else if(self.fallback&&typeof self.fallback==='function'){self.response=true;self.status=4;self.fallback()}}},self.timeout.length)}}}},enable:function(){var so=sociomantic.sonar;for(var i=0;i<so.enable_callbacks.length;i++){if(so.enable_callbacks.hasOwnProperty(i)){var enable_callback=so.enable_callbacks[i];if(typeof enable_callback==='function'){enable_callback();so.enable_callbacks.splice(i,1);i--}}}},response:function(param,response_id){var request_pool=sociomantic.sonar.request.pool;for(var id in request_pool){if(request_pool.hasOwnProperty(id)&&id===response_id){var request=request_pool[id];var callback=request.callback;var instance=request.instance;if(!request.response){if(typeof callback==='function'){request.response=true;request.status=3;if(typeof instance==='string'){callback(param,instance)}else{callback(param)}}}else{}}}}};sociomantic.sonar.adv=sociomantic.sonar.adv||{};sociomantic.sonar.adv['springer-us']=sociomantic.sonar.adv['springer-us']||{version:'adv2.03',adpanType:'adv',rtb:'true',adpan_id:'springer-us',shouldSendOAN:false,category_separator:false,got_confirmed:false,got_nonconfirmed:false,support_confirmed_in_iframe:false,request_objects:{'co':false,'po':false,'to':false,'dob':false,'fo':false},tracking_objects:{},tracking_objects_names:{'product':'product','basket':'basket','sale':'sale','lead':'lead','customer':'customer'},action:{type:false,basket:false,lead:false,sale:false,view:true},heartbeats:[2,4,8,16,32],shouldSendHeartBeats:false,lastActive:1,enable:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var cookie=core.getCookie();adv.getTrackingObjects();adv.getCategory();adv.getProduct();adv.getTransaction();adv.getCustomer();adv.getOptOut();adv.getAction();core.getHooks('enable');if(!adv.getConfirmed()){adv.got_nonconfirmed=true;adv.buildActionUrl(adv.action.type,cookie)}if(adv.shouldSendHeartBeats){adv.sendHeartBeats(cookie)}},getTrackingObjects:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('getTrackingObjects');var tn=adv.tracking_objects_names;var tr=adv.tracking_objects;var copy=false;var name;var windowObject;for(var prop in tn){if(core.hasProperty(tn,prop)){name=tn[prop];windowObject=window[name];if(typeof windowObject===core.f){copy=core.deepCopy(windowObject())}else if(core.isObject(windowObject)){copy=core.deepCopy(windowObject)}if(copy){tr[prop]=copy;copy=false}}}},getCategory:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('getCategory');var tr=adv.tracking_objects;var product=core.isObject(tr.product)?tr.product:false;var basket=core.isObject(tr.basket)&&!core.isEmpty(tr.basket)?tr.basket:false;var lead=core.isObject(tr.lead)&&!core.isEmpty(tr.lead)?tr.lead:false;if(product&&typeof product.category!==core.u&&typeof product.identifier===core.u&&!basket&&!lead){adv.cleanProduct();if(core.isArray(product.category)){adv.request_objects.co=product}}},getProduct:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('getProduct');var tr=adv.tracking_objects;var product=core.isObject(tr.product)?tr.product:false;var basket=core.isObject(tr.basket)&&!core.isEmpty(tr.basket)?tr.basket:false;var ro=adv.request_objects;var hasProducts=basket&&core.isArray(basket.products);var hasDate=basket&&typeof basket.date!==core.u;if(product&&typeof product.identifier!==core.u&&!basket){if(typeof product.price!==core.u){if(product.price!==''){product.price=parseFloat(product.price)}else{delete product.price}}if(typeof product.amount!==core.u){if(product.amount!==''){product.amount=parseFloat(product.amount)}else{delete product.amount}}adv.cleanProduct();ro.po={products:[product]}}if(basket&&(hasDate||hasProducts)){var po={};adv.action.basket=true;if(hasProducts){for(var i in basket.products){if(core.hasProperty(basket.products,i)){var p=basket.products[i];if(core.isEmpty(p)){delete basket.products[i]}else{if(typeof p.amount!==core.u){p.amount=parseFloat(p.amount)}if(typeof p.quantity!==core.u){p.quantity=parseInt(p.quantity,10)}}}}po.products=basket.products}if(hasDate){po.date=basket.date}ro.po=po}},cleanProduct:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var product=typeof tr.product===core.o?tr.product:false;var cleanProductCategory=function(){if(core.isArray(product.category)){for(var i=0;i<product.category.length;i++){if(core.hasProperty(product.category,i)){var cat=product.category[i];if(cat===''||(typeof cat!==core.s&&typeof cat!==core.n)){product.category.splice(i,1);i-=1}else{product.category[i]=adv.cleanString(cat)}}}if(product.category.length<1){delete product.category}}else if(typeof product.category===core.s){product.category=adv.cleanString(product.category);if(product.category===''){delete product.category}else{product.category=[product.category]}}};var clean=function(product,property,optionalFn){if(typeof product[property]===core.s){var cleaned=adv.cleanString(product[property]);if(optionalFn){cleaned=optionalFn(cleaned)}product[property]=cleaned}};if(product){try{clean(product,'brand');cleanProductCategory();clean(product,'currency',function(str){return str.toUpperCase()});clean(product,'url',function(str){core.arrayEach(['utm_source','utm_medium','utm_term','utm_content','utm_campaign'],function(utm){var regex=new RegExp('(?:\\?|&)'+utm+'=.*?(?=&|$)','g');str=str.replace(regex,'')});return str});clean(product,'description');clean(product,'fn')}catch(e){core.reportError(e,'__cleanProduct_error__')}}},cleanString:(function(){var handleQuotes=function(_,group,singleQuote){return singleQuote!==undefined?'\'':(group+'\\"')};return function(str){var core=sociomantic.sonar.adv['springer-us'].core;if(typeof str===core.n){return str+''}if(typeof str===core.s){return str.replace(/(^|[^\\])"|(\\')/g,handleQuotes).replace(/(<[^>]+)>/ig,'').replace(/(\r\n|\n|\r)/gm,' ')}else{core.reportError('','cleanString_non_string_value_found');return''}}}()),getTransaction:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('getTransaction');var tr=adv.tracking_objects;var basket=typeof tr.basket===core.o?tr.basket:false;var lead=typeof tr.lead===core.o?tr.lead:false;var ro=adv.request_objects;if(basket&&typeof basket.transaction!==core.u){var basketCopy={};for(var prop in basket){if(core.hasProperty(basket,prop)&&prop!=='products'&&prop!=='date'){basketCopy[prop]=basket[prop]}}if(!core.isEmpty(basketCopy)){adv.action.sale=true;ro.to={transaction:basketCopy}}}if(lead&&(typeof lead.transaction!==core.u||typeof lead.identifier!==core.u)){if(typeof lead.identifier!==core.u){lead.transaction=lead.identifier;delete lead.identifier;core.reportError('','lead.identifier_found')}adv.action.lead=true;ro.to={transaction:lead}}},getConfirmed:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var tn=adv.tracking_objects_names;var action;var cookie;var to;if(!adv.got_confirmed){cookie=core.getCookie();to=adv.request_objects.to;if(typeof to!==core.o){to={}}if(typeof to.transaction!==core.o){to.transaction={}}if(typeof tr.sale!==core.o&&typeof window[tn.sale]===core.o){tr.sale=window[tn.sale]}if(typeof tr.sale===core.o&&typeof tr.sale.confirmed!==core.u&&typeof to.transaction.confirmed===core.u){if(!adv.support_confirmed_in_iframe&&!adv.got_nonconfirmed){adv.got_nonconfirmed=true;adv.getAction();adv.buildActionUrl(adv.action.type,cookie)}adv.got_confirmed=true;to.transaction.confirmed=tr.sale.confirmed;adv.request_objects.to=to;action='sale';if(adv.action.lead){action='lead'}adv.buildActionUrl(action,cookie);return true}}return false},getCustomer:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;adv.core.getHooks('getCustomer');var tr=adv.tracking_objects;var dob=typeof tr.customer===core.o?tr.customer:false;if(dob){var isEmptyStr=function(property){return typeof property!==core.u&&property===''};if(isEmptyStr(dob.segment)){delete dob.segment}if(isEmptyStr(dob.identifier)){delete dob.identifier}if(isEmptyStr(dob.mhash)){delete dob.mhash}if(!adv.core.isEmpty(dob)&&(typeof dob.agegroup!==core.u||typeof dob.education!==core.u||typeof dob.gender!==core.u||typeof dob.targeting!==core.u||typeof dob.mhash!==core.u||typeof dob.segment!==core.u||(typeof dob.identifier!==core.u&&dob.identifier!==''&&dob.identifier!=='0'&&dob.identifier!==0))){adv.request_objects.dob=dob}}},getOptOut:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('getOptOut')},getAction:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.getActionView();adv.getActionBasket();adv.getActionSale();adv.getActionLead();return adv.action.type},getActionView:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('getActionView');if(adv.action.view){adv.action.type='view'}},getActionBasket:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('getActionBasket');if(adv.action.basket){adv.action.type='basket'}},getActionSale:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('getActionSale');if(adv.action.sale){adv.action.type='sale'}},getActionLead:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('getActionLead');if(adv.action.lead){adv.action.type='lead'}},buildUrl:function(host,action,aid,heartbeat){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('buildUrl');var esc=core.stringifyAndEncode;var cookie=core.getCookie();var ro=adv.request_objects;var rtb=adv.rtb;var co=ro.co;var po=ro.po;var to=ro.to;var dob=ro.dob;var fo=ro.fo;var version=adv.version;var oan=adv.shouldSendOAN;var dur=typeof heartbeat===core.n?heartbeat:false;var url=host+'action/'+action+'?aid='+(aid?aid:'')+(cookie?'&fpc='+cookie:'')+(co?'&co='+esc(co):'')+(po?'&po='+esc(po):'')+(to?'&to='+esc(to):'')+(dob?'&do='+esc(dob):'')+(fo?'&fo='+esc(fo):'')+(rtb?'&rtb='+rtb:'')+(version?'&v='+version:'')+(oan?'&oan=springer-us':'')+(dur?'&dur='+dur:'');return url},buildActionUrl:function(action,cookie,heartbeat){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('buildActionUrl',{action:action,cookie:cookie});var aid=adv.adpan_id;var host=adv.core.location.sonar;if(action){adv.trackingRequest(host,action,aid,heartbeat)}},trackingRequest:function(host,action,aid,heartbeat){var sonar=sociomantic.sonar;var adv=sonar.adv['springer-us'];var core=adv.core;var url=adv.buildUrl(host,action,aid,heartbeat);var load=core.load;var callback=adv.trackingResponse;var request=sonar.request.add(url,load,callback);request.load()},trackingResponse:function(value){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;core.getHooks('trackingResponse',value);if(typeof value===core.o){if(typeof value.uid===core.s&&value.uid!==''){core.setCookie(value.uid);if(core.isArray(value.pixels)){core.setRtbUserMatchUrls(value.uid,value.pixels)}else if(typeof core.location===core.o&&typeof core.location.rtb===core.o){core.setRtbUserMatchUrls(value,core.location.rtb)}}else if(adv.rtb==='force'&&core.getCookie()&&core.isArray(value.pixels)){core.setRtbUserMatchUrls(core.getCookie(),value.pixels)}}else if(typeof value===core.s&&value!==''){core.setCookie(value);core.reportError('','legacy_sonar_response_rtb='+adv.rtb);if(typeof core.location===core.o&&typeof core.location.rtb===core.o){core.setRtbUserMatchUrls(value,core.location.rtb)}}},replaceUndefinedWithNull:function(value){return value===undefined?null:value},getData:function(){try{var adv=sociomantic.sonar.adv['springer-us'];var tr=adv.tracking_objects;var tn=adv.tracking_objects_names;var core=adv.core;var data={};for(var name in tn){if(core.hasProperty(tn,name)){data[name]=core.deepCopy(tr[name],adv.replaceUndefinedWithNull)}}return core.stringify(data)}catch(e){return'error_getting_tracking_data'}return'no_tracking_data'},clear:function(){var adv=sociomantic.sonar.adv['springer-us'];adv.core.getHooks('clear');adv.clearTrackingObjects();adv.request_objects={'co':false,'po':false,'to':false,'dob':false,'fo':false};adv.rtb='true';adv.got_confirmed=false;adv.got_nonconfirmed=false;adv.resetAction()},clearTrackingObjects:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tn=adv.tracking_objects_names;var tr=adv.tracking_objects;var w=window;if(typeof w[tn.product]!==core.u){tr.product={};w[tn.product]={}}if(typeof w[tn.basket]!==core.u){tr.basket={};w[tn.basket]={}}if(typeof w[tn.sale]!==core.u){tr.sale={};w[tn.sale]={}}if(typeof w[tn.lead]!==core.u){tr.lead={};w[tn.lead]={}}if(typeof w[tn.customer]!==core.u){tr.customer={};w[tn.customer]={}}},resetAction:function(){var adv=sociomantic.sonar.adv['springer-us'];var action=adv.action;for(var i in action){if(adv.core.hasProperty(action,i)&&i!=='view'){action[i]=false}}action.view=true},track:function(){sociomantic.sonar.adv['springer-us'].enable()},hasPrice:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var product=typeof tr.product===core.o?tr.product:false;var validPrice=false;if(product){if((typeof product.price===core.n||typeof product.price===core.s)&&product.price>0){validPrice=product.price}else if((typeof product.amount===core.n||typeof product.amount===core.s)&&product.amount>0){validPrice=product.amount}}return validPrice},sendHeartBeats:function(cookie){var adv=sociomantic.sonar.adv['springer-us'];var routine=adv.startRoutineDetectActiveUser();var beginTime=new Date().getTime();var i=0;var len=adv.heartbeats.length;var lastHeartBeat=0;routine.intervals.push(setInterval(function(){var timePassed=new Date().getTime()-beginTime;var nextHeartbeat=adv.heartbeats[i]*1000;if(timePassed>=nextHeartbeat){if(adv.lastActive*1000>lastHeartBeat&&adv.lastActive*1000<=nextHeartbeat){adv.buildActionUrl(adv.action.type,cookie,adv.lastActive)}lastHeartBeat=nextHeartbeat;i+=1;if(i===len){adv.clearRoutineDetectActiveUser(routine)}}},500))},startRoutineDetectActiveUser:function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var start=new Date().getTime();var lastMovement=start;var hidden=core.hiddenName;var addListener=core.eventListeners.add;var isVisible;var lastX=-1;var lastY=-1;var mouseDetector=document.createElement('div');if(document&&document.body){document.body.appendChild(mouseDetector)}var updateLastMovement=function(event){var now=new Date().getTime();if((now-lastMovement>1000)&&(isVisible||!document[hidden])&&(event.x!==lastX||event.y!==lastY)){lastX=event.x;lastY=event.y;lastMovement=now;adv.lastActive=Math.round((lastMovement-start)/1000)}};var updateVisibleTrue=function(){isVisible=true};var updateVisibleFalse=function(){isVisible=false};var mouseHack=setInterval(function(){if(mouseDetector.fireEvent){mouseDetector.fireEvent('onmousemove')}},100);addListener(window,'focus',updateVisibleTrue);addListener(window,'blur',updateVisibleFalse);addListener(document,'mousemove',updateLastMovement);addListener(mouseDetector,'mousemove',updateLastMovement);addListener(document,'scroll',updateLastMovement);return{intervals:[mouseHack],events:[{target:window,func:updateVisibleFalse,events:['blur']},{target:window,func:updateVisibleTrue,events:['focus']},{target:document,func:updateLastMovement,events:['mousemove','scroll']},{target:mouseDetector,func:updateLastMovement,events:['mousemove']}]}},clearRoutineDetectActiveUser:function(routine){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var removeListener=core.eventListeners.remove;core.each(routine.intervals,function(interval){clearInterval(interval)});core.each(routine.events,function(evt){core.each(evt.events,function(eventName){removeListener(evt.target,eventName,evt.func)})})}};sociomantic.sonar.enable_callbacks.push(sociomantic.sonar.adv['springer-us'].enable);sociomantic.sonar.adv['springer-us'].core=sociomantic.sonar.adv['springer-us'].core||{cookie:{lifetime:((3600*24000)*365),optoutLifetime:((3600*24000)*365),optoutRegex:'(^|;) ?sonar_optout=([^;]*)(;|$)',regex:'(^|;) ?__sonar=([^;]*)(;|$)'},sonarIdRegex:/(\[SONAR-ID\])/g,protocolToken:/(\[PROTOCOL\])/g,protocolEncodedToken:/(\[PROTOCOL_ENCODED\])/g,htmlTypes:['iframe','img','script'],u:'undefined',s:'string',n:'number',b:'boolean',f:'function',o:'object',location:{sonar:'',debug:'',trace:'',rtb:[]},hooks:{},getCookie:function(){var core=sociomantic.sonar.adv['springer-us'].core;var cookieDoc=document.cookie;if(typeof cookieDoc===core.s){var cookie=cookieDoc.match(core.cookie.regex);if(cookie){return cookie[2]}}return false},setCookie:function(value,name){var core=sociomantic.sonar.adv['springer-us'].core;var domain='';var futdate=new Date();var expdate=futdate.getTime()+core.cookie.lifetime;var host;name=name||'__sonar';futdate.setTime(expdate);try{if(parseInt(value,10)>0){host=window.location.hostname.split('.').reverse();if(host.length>2&&host[1].length<=3&&host[0].length<=2){domain='.'+host[2]+'.'+host[1]+'.'+host[0]}else{domain='.'+host[1]+'.'+host[0]}document.cookie=name+'='+value+'; domain='+domain+'; expires='+futdate.toUTCString()+'; path=/'}}catch(e){core.reportError(e,'setCookie')}},createPixel:function(rtb,protocol,uid){var core=sociomantic.sonar.adv['springer-us'].core;var url;url=rtb.url.replace(core.sonarIdRegex,uid);url=url.replace(core.protocolToken,protocol);url=url.replace(core.protocolEncodedToken,encodeURIComponent(protocol));core.createHtmlElement(url,rtb.type,'__usrm')},setRtbUserMatchUrls:function(uid,rtbs){var core=sociomantic.sonar.adv['springer-us'].core;var protocol;var rtb;for(var i in rtbs){if(core.hasProperty(rtbs,i)){rtb=rtbs[i];if(rtb.https==='force'){protocol='https://';core.createPixel(rtb,protocol,uid)}else if(protocol==='http://'||rtb.https==='true'){protocol=core.getUrlProtocol();core.createPixel(rtb,protocol,uid)}}}},createHtmlElement:function(src,type,_class){var core=sociomantic.sonar.adv['springer-us'].core;var el=document.createElement(core.getValidType(type));el.src=src;el.width=0;el.height=0;el.style.cssText='display:none !important;width:0 !important;height:0 !important;';if(typeof _class===core.s){el.className=_class}core.appendElement(el)},getValidType:function(type){var core=sociomantic.sonar.adv['springer-us'].core;if(typeof type===core.s&&core.indexOfArray(core.htmlTypes,type)>-1){return type}return'img'},appendElement:function(element){var core=sociomantic.sonar.adv['springer-us'].core;var scripts=document.getElementsByTagName('script');if(scripts.length>0){var last=scripts[scripts.length-1];last.parentNode.insertBefore(element,last.nextSibling)}else if(document.body!==null&&typeof document.body!==core.u){document.body.appendChild(element)}},getHooks:function(hookGroup,param){var core=sociomantic.sonar.adv['springer-us'].core;var allHooks=core.hooks;if(typeof allHooks[hookGroup]===core.o){var hooks=allHooks[hookGroup];for(var i in hooks){if(core.hasProperty(hooks,i)){var hook=hooks[i];if(typeof hook===core.f){if(typeof param!==core.u){hook(param)}else{hook()}}}}}},setHooks:function(hookGroup,newHook,hookId){var core=sociomantic.sonar.adv['springer-us'].core;var allHooks=core.hooks;hookId=hookId||Math.random()+'';allHooks[hookGroup]=allHooks[hookGroup]||{};if(typeof newHook===core.f&&typeof allHooks[hookGroup][hookId]!==core.f){allHooks[hookGroup][hookId]=newHook}},stringify:function(obj){var core=sociomantic.sonar.adv['springer-us'].core;var t=typeof obj;if(t!==core.o||obj===null){if(t===core.s){obj='"'+obj+'"'}return String(obj)}else{var n;var v;var json=[];var arr=core.isArray(obj);for(n in obj){if(core.hasProperty(obj,n)){v=obj[n];t=typeof v;if(t===core.s){v='"'+v+'"'}else if(t===core.o&&v!==null){v=core.stringify(v)}if(t!==core.u){json.push((arr?'':'"'+n+'":')+String(v))}else{core.reportError('','stringify_undefined_value_in_'+n)}}}return(arr?'[':'{')+core.join(json)+(arr?']':'}')}},fixedEncodeURIComponent:function(str){var encodedStr=encodeURIComponent(str);var safeEscape=function(v){return escape(v)};encodedStr=encodedStr.replace(/[!'()]/g,safeEscape);encodedStr=encodedStr.replace(/\*/g,'%2A');return encodedStr},stringifyAndEncode:function(obj){var core=sociomantic.sonar.adv['springer-us'].core;return core.fixedEncodeURIComponent(core.stringify(obj))},reportError:function(e,method,location){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var esc=core.fixedEncodeURIComponent;if(typeof e!==core.o){e={name:core.u,message:core.u,stack:core.u}}var errorParamsArray=['e='+esc(e.name),'a='+adv.adpan_id,'v='+adv.version,'f='+esc(method||'unknown_method'),'c='+core.getCookie(),'d='+esc(adv.getData()),'m='+esc(e.message),'h='+esc(window.location.href),'r='+esc(document.referrer),'s='+esc(e.stack)];if(adv.shouldSendOAN){errorParamsArray.push('oan=springer-us')}var separator='&';var errorParams=core.join(errorParamsArray,separator);core.reportMsg(errorParams,location)},reportTrace:function(e,method){var core=sociomantic.sonar.adv['springer-us'].core;core.reportError(e,method,core.location.trace)},reportMsg:function(msg,location){var core=sociomantic.sonar.adv['springer-us'].core;location=location||core.location.debug;var errorString=core.getUrlProtocol()+location+msg+'&cachebuster='+core.buildCacheBuster();core.createHtmlElement(errorString)},load:function(url,doc,https){var core=sociomantic.sonar.adv['springer-us'].core;var s=doc.createElement('script');s.type='text/javascript';s.async=true;s.src=(https?core.getUrlProtocol():'http://')+url;core.appendElement(s)},hasProperty:function(obj,property){return Object.prototype.hasOwnProperty.call(obj,property)},getUrlProtocol:function(altDoc){var core=sociomantic.sonar.adv['springer-us'].core;var doc=typeof altDoc!==core.u?altDoc:document;return'https:'===doc.location.protocol?'https://':'http://'},addUrlProtocol:function(url,altDoc){var core=sociomantic.sonar.adv['springer-us'].core;var newProtocol=core.getUrlProtocol(altDoc);if(typeof url===core.s){var i=url.indexOf('\/\/');if((i>=0)&&(i<9)){url=url.replace(/^.*?\/\//,newProtocol)}else{url=newProtocol+url}}return url},buildCacheBuster:function(type){var cb;switch(type){case'timestamp':cb=Math.round(new Date().getTime()/1000)+'';break;default:cb=Math.random()+''}return cb.replace('.','')},isEmpty:function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true},isArray:function(obj){if(!Array.isArray){return Object.prototype.toString.call(obj)==='[object Array]'}return Array.isArray(obj)},indexOfArray:function(arr,item){for(var i=0,length=arr.length;i<length;i++){if(arr[i]===item){return i}}return-1},join:function(params,separator){var result='';separator=separator||',';for(var i=0,length=params.length;i<length;i++){result+=params[i];if(i!==length-1){result+=separator}}return result},getLanguage:function(){var core=sociomantic.sonar.adv['springer-us'].core;var browserLang=false;try{browserLang=navigator.userLanguage||navigator.language||'';browserLang=browserLang.toLowerCase()}catch(e){core.reportError(e,'.getLanguage')}return browserLang!==''?browserLang:false},arrayEach:function(array,callback){for(var index=0,length=array.length;index<length;index++){if(callback(array[index],index,array)===false){break}}return array},objectEach:function(object,callback){var core=sociomantic.sonar.adv['springer-us'].core;for(var prop in object){if(core.hasProperty(object,prop)){if(callback(object[prop],prop,object)===false){break}}}return object},each:function(list,callback){var core=sociomantic.sonar.adv['springer-us'].core;if(typeof list===core.o&&list!==null){if(core.isArray(list)){return core.arrayEach(list,callback)}return core.objectEach(list,callback)}return list},deepCopy:function(thing,modifier,limit){var core=sociomantic.sonar.adv['springer-us'].core;var isObject=core.isObject(thing);var result;limit=typeof limit==='number'?limit-1:3;if(!isObject){if(typeof modifier===core.f){result=modifier(thing)}else{result=thing}}else if(limit>0){if(core.isArray(thing)){result=new Array(thing.length)}else{result={}}if((thing+'').match(/html|element|node/ig)||thing.nodeName||thing.nodeType){result=null}else{core.each(thing,function(item,index){result[index]=core.deepCopy(item,modifier,limit)})}}else{core.reportError('','__deepCopy__reached_nesting_limit__');result=null}return result},isObject:function(variable){return typeof variable==='object'&&variable!==null},eventListeners:(function(){var addListener,removeListener;if(document.addEventListener){addListener=function(el,evt,f){return el.addEventListener(evt,f,false)};removeListener=function(el,evt,f){return el.removeEventListener(evt,f,false)}}else{addListener=function(el,evt,f){return el.attachEvent('on'+evt,f)};removeListener=function(el,evt,f){return el.detachEvent('on'+evt,f)}}return{add:addListener,remove:removeListener}}()),hiddenName:(function(){if(typeof document.hidden!=='undefined'){return'hidden'}if(typeof document.mozHidden!=='undefined'){return'mozHidden'}if(typeof document.msHidden!=='undefined'){return'msHidden'}if(typeof document.webkitHidden!=='undefined'){return'webkitHidden'}}()),addExtensionVersion:function(extensionId,extensionVersion){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var formattedVersion='-'+extensionId+':'+extensionVersion;if(typeof extensionId===core.s&&typeof extensionVersion===core.s&&adv.version.indexOf(formattedVersion)===-1){adv.version+=formattedVersion}},isPageType:function(pagetype){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var product=core.isObject(tr.product)?tr.product:false;var basket=core.isObject(tr.basket)&&!core.isEmpty(tr.basket)?tr.basket:false;var lead=core.isObject(tr.lead)&&!core.isEmpty(tr.lead)?tr.lead:false;var match=false;switch(pagetype){case'homepage':if(!lead&&!basket&&!product){match=true}break;case'category':if(!lead&&!basket&&product&&!product.identifier&&typeof product.category!==core.u){match=true}break;case'product':if(!lead&&!basket&&product&&product.identifier){match=true}break;case'basket':if(!lead&&basket&&!basket.transaction){match=true}break;case'sale':if(!lead&&basket&&basket.transaction){match=true}break;case'lead':if(lead){match=true}break;default:adv.core.reportError('','incorrect_pagetype_'+pagetype.toUpperCase()+'_used_in_isPageType')}return match}};sociomantic.sonar.adv['springer-us'].core.location={sonar:'us-sonar.sociomantic.com/js/2010-07-01/',debug:'us-dbug.sociomantic.com/adv/debug.gif?',trace:'us-dbug.sociomantic.com/adv/trace.gif?',rtb:[]};sociomantic.sonar.adv['springer-us'].core.setHooks('getTrackingObjects',function(){var adv=sociomantic.sonar.adv['springer-us'];adv.referrer=false;adv.url=false;try{if(document.referrer!==''){adv.referrer=document.referrer}if(document.location!==''){adv.url=document.location.href}}catch(e){}adv.core.getHooks('getReferrer')},'getReferrer');sociomantic.sonar.adv['springer-us'].core.addExtensionVersion('21','1.1.0');sociomantic.sonar.adv['springer-us'].resetTrackingObjectsValues={};sociomantic.sonar.adv['springer-us'].core.setHooks('getCategory',function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var tn=adv.tracking_objects_names;var o=core.o;var f=core.f;var hasObj;var resetObj;var newValues=typeof adv.resetTrackingObjectsValues===o?adv.resetTrackingObjectsValues:false;if(newValues){for(var obj in newValues){if(core.hasProperty(newValues,obj)&&core.hasProperty(tn,obj)&&typeof newValues[obj]===o){resetObj=newValues[obj];hasObj=typeof tr[obj]==='object'&&tr[obj];for(var property in resetObj){if(core.hasProperty(resetObj,property)){if(typeof resetObj[property]['condition']!==f){if(!hasObj){tr[obj]={};hasObj=true}tr[obj][property]=resetObj[property]}else{if(resetObj[property]['condition']()){if(!hasObj){tr[obj]={};hasObj=true}if(typeof resetObj[property]['value']===f){tr[obj][property]=resetObj[property]['value']()}else{tr[obj][property]=resetObj[property]['value']}}}}}}}}},'resetTrackingObjectsValues');sociomantic.sonar.adv['springer-us'].core.addExtensionVersion('25','1.1.0');sociomantic.sonar.adv['springer-us'].resetTrackingObjectsValues={"product":{"category":{"condition":function(){var adv=sociomantic.sonar.adv['springer-us'];var loc=adv.url;return typeof loc==='string'&&loc.indexOf('SGWID')>-1},"value":function(){var adv=sociomantic.sonar.adv['springer-us'];var loc=decodeURIComponent(adv.url).replace(/\+/g,' ');loc=loc.match(/springer.+?\/([^?]+)/);var category=[];if(loc&&typeof loc[1]==='string'){loc=loc[1].split('/');for(var i=0,length=loc.length;i<length;i++){category.push(loc[i])}}return category}}}};sociomantic.sonar.adv['springer-us'].tamAllowMultipleTracking={};sociomantic.sonar.adv['springer-us'].originalRequest={status:0};sociomantic.sonar.adv['springer-us'].matchedHosts=[];sociomantic.sonar.adv['springer-us'].shouldSendOAN=true;sociomantic.sonar.adv['springer-us'].core.setHooks('trackingResponse',function(value){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var tr=adv.tracking_objects;var product=core.isObject(tr.product)?tr.product:false;var basket=core.isObject(tr.basket)&&!core.isEmpty(tr.basket)?tr.basket:false;var lead=core.isObject(tr.lead)&&!core.isEmpty(tr.lead)?tr.lead:false;var action=adv.action.type;var pageTypeMatches=false;var pages;var homepageMatch;var categoryMatch;var productMatch;var adpanOptions;for(var adpanName in adv.tamAllowMultipleTracking){if(core.hasProperty(adv.tamAllowMultipleTracking,adpanName)){adpanOptions=adv.tamAllowMultipleTracking[adpanName];pages=core.isArray(adpanOptions.pages)?adpanOptions.pages:false;homepageMatch=!product&&!basket&&!lead&&core.indexOfArray(pages,'homepage')>-1;categoryMatch=product&&!product.identifier&&core.isArray(product.category)&&product.category.length>0&&core.indexOfArray(pages,'category')>-1;productMatch=product&&product.identifier&&core.indexOfArray(pages,'product')>-1;pageTypeMatches=core.indexOfArray(pages,action)>-1||action==='view'&&(homepageMatch||categoryMatch||productMatch);if(pageTypeMatches){if((typeof adpanOptions.status===core.u||adpanOptions.status===0)&&adpanName!==adv.adpan_id){adv.sendMultipleReq(action,adpanOptions,adpanName,value)}else if(adpanName===adv.adpan_id&&adv.originalRequest.status===0){adv.sendMultipleReq(action,adv.originalRequest,'springer-us',value)}}}}},'tamAllowMultipleTracking');sociomantic.sonar.adv['springer-us'].sendMultipleReq=function(action,adpanOptions,adpanId,value){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;var basket=adv.tracking_objects.basket;var matched=adv.matchedHosts;var rtb=adv.rtb;var host;adpanOptions.status=1;if(typeof adpanOptions.location===core.o&&typeof adpanOptions.location.sonar===core.s){host=adpanOptions.location.sonar}else{host=adv.core.location.sonar}if(adpanId!==''){if(typeof value===core.o&&typeof value.uid===core.s){if(!core.getCookie()){core.setCookie(value.uid)}if(core.indexOfArray(matched,host)===-1&&host!==adv.core.location.sonar){adv.rtb='force';matched.push(host)}}adv.trackingRequest(host,action,adpanId);adv.rtb=rtb;if(action==='sale'&&typeof adv.tracking_objects.sale===core.o&&adv.tracking_objects.sale.confirmed){if(basket.confirmed){delete basket.confirmed}adv.getTransaction();adv.trackingRequest(host,action,adpanId);basket.confirmed=true;adv.getTransaction()}}};sociomantic.sonar.adv['springer-us'].core.setHooks('clear',function(){var adv=sociomantic.sonar.adv['springer-us'];var core=adv.core;for(var adpanId in adv.tamAllowMultipleTracking){if(core.hasProperty(adv.tamAllowMultipleTracking,adpanId)){adv.tamAllowMultipleTracking[adpanId].status=0}}adv.originalRequest.status=0},'tamAllowMultipleTrackingClear');sociomantic.sonar.adv['springer-us'].core.addExtensionVersion('34','1.2.0');sociomantic.sonar.adv['springer-us'].tamAllowMultipleTracking={"springer-eu":{"location":{"sonar":"eu-sonar.sociomantic.com\/js\/2010-07-01\/"},"pages":["basket","lead","sale","homepage","category","product"]}};try{sociomantic.enable()}catch(e){sociomantic.sonar.adv['springer-us'].core.reportError(e,'initial_sociomantic_enable')}